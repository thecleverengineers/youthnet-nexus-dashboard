
RewriteEngine On

# Handle CORS preflight requests
RewriteCond %{REQUEST_METHOD} OPTIONS
RewriteRule ^(.*)$ $1 [R=200,L]

# API routes
RewriteRule ^api/auth/register/?$ api/auth/register.php [L]
RewriteRule ^api/auth/login/?$ api/auth/login.php [L]
RewriteRule ^api/auth/logout/?$ api/auth/logout.php [L]
RewriteRule ^api/auth/profile/?$ api/auth/profile.php [L]
RewriteRule ^api/auth/refresh/?$ api/auth/refresh.php [L]

# Health check
RewriteRule ^health/?$ health.php [L]

# Deny access to sensitive files
<Files ".env">
    Require all denied
</Files>

<Files "composer.json">
    Require all denied
</Files>

<Files "composer.lock">
    Require all denied
</Files>
